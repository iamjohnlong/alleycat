!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=void 0,l=void 0,s=void 0,c=void 0,f=function(){},g={didMount:f,onMatch:f,notFound:f},h=function(e,t,n,r){c=!1,l=e,u=Object.keys(t).map(function(e){return t[e].pattern=new i.default(e),t[e]}),Object.assign(g,n),d(location.pathname)};h.set=function(e){l!==e&&(window.history.pushState(null,null,e),c&&d(e))},h.get=function(){return s};var d=function(e){l=e;var t=!0,n=!0,r=!1,o=void 0;try{for(var i,f=u[Symbol.iterator]();!(n=(i=f.next()).done);n=!0){var h=i.value,d=h.pattern.match(l);if(s=a({params:d,path:l,name:h.name},h),c||null===d||(c=!0,g.didMount.call(null,s)),null!==d){p(h,s),t=!1;break}}}catch(e){r=!0,o=e}finally{try{!n&&f.return&&f.return()}finally{if(r)throw o}}t&&(c=!0,g.didMount.call(null,s),g.notFound())},p=function(e,t){var n=0;e.middleware&&e.middleware.length?function r(){if(e.middleware.length!==n){var a=e.middleware[n];n++,a.call(null,t,r)}else m(e.render,t)}():m(e.render,t,!0)},m=function(e,t,n){var a=e?"object"===(void 0===e?"undefined":r(e))?e:e.call(null,t):void 0;t.after&&t.after(t),n&&g.onMatch(t,a)},v=function(){d(location.pathname)};window.onhashchange=window.onpopstate=v,t.default=h},function(e,t,n){var r,a,o,i=[].slice;!function(i,u){null!=n(2)?(a=[],r=u,void 0!==(o="function"==typeof r?r.apply(t,a):r)&&(e.exports=o)):void 0!==t&&null!==t?e.exports=u():i.UrlPattern=u()}(this,function(){var e,t,n,r,a,o,u,l,s,c,f,g,h,d,p;return s=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},u=function(e,t){var n,r,a;for(a=[],n=-1,r=e.length;++n<r;)a=a.concat(t(e[n]));return a},d=function(e,t){var n,r,a;for(a="",n=-1,r=e.length;++n<r;)a+=t(e[n]);return a},h=function(e){return new RegExp(e.toString()+"|").exec("").length-1},f=function(e,t){var n,r,a,o,i;for(o={},n=-1,a=e.length;++n<a;)r=e[n],null!=(i=t[n])&&(null!=o[r]?(Array.isArray(o[r])||(o[r]=[o[r]]),o[r].push(i)):o[r]=i);return o},e={},e.Result=function(e,t){this.value=e,this.rest=t},e.Tagged=function(e,t){this.tag=e,this.value=t},e.tag=function(t,n){return function(r){var a,o;if(null!=(a=n(r)))return o=new e.Tagged(t,a.value),new e.Result(o,a.rest)}},e.regex=function(t){return function(n){var r,a;if(null!=(r=t.exec(n)))return a=r[0],new e.Result(a,n.slice(a.length))}},e.sequence=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],function(n){var r,a,o,i,u,l;for(r=-1,a=t.length,l=[],i=n;++r<a;){if(o=t[r],null==(u=o(i)))return;l.push(u.value),i=u.rest}return new e.Result(l,i)}},e.pick=function(){var t,n;return t=arguments[0],n=2<=arguments.length?i.call(arguments,1):[],function(r){var a,o;if(null!=(o=e.sequence.apply(e,n)(r)))return a=o.value,o.value=a[t],o}},e.string=function(t){var n;return n=t.length,function(r){if(r.slice(0,n)===t)return new e.Result(t,r.slice(n))}},e.lazy=function(e){var t;return t=null,function(n){return null==t&&(t=e()),t(n)}},e.baseMany=function(t,n,r,a,o){var i,u,l;for(u=o,l=r?"":[];;){if(null!=n&&null!=n(u))break;if(null==(i=t(u)))break;r?l+=i.value:l.push(i.value),u=i.rest}if(!a||0!==l.length)return new e.Result(l,u)},e.many1=function(t){return function(n){return e.baseMany(t,null,!1,!0,n)}},e.concatMany1Till=function(t,n){return function(r){return e.baseMany(t,n,!0,!0,r)}},e.firstChoice=function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],function(t){var n,r,a,o;for(n=-1,r=e.length;++n<r;)if(a=e[n],null!=(o=a(t)))return o}},g=function(t){var n;return n={},n.wildcard=e.tag("wildcard",e.string(t.wildcardChar)),n.optional=e.tag("optional",e.pick(1,e.string(t.optionalSegmentStartChar),e.lazy(function(){return n.pattern}),e.string(t.optionalSegmentEndChar))),n.name=e.regex(new RegExp("^["+t.segmentNameCharset+"]+")),n.named=e.tag("named",e.pick(1,e.string(t.segmentNameStartChar),e.lazy(function(){return n.name}))),n.escapedChar=e.pick(1,e.string(t.escapeChar),e.regex(/^./)),n.static=e.tag("static",e.concatMany1Till(e.firstChoice(e.lazy(function(){return n.escapedChar}),e.regex(/^./)),e.firstChoice(e.string(t.segmentNameStartChar),e.string(t.optionalSegmentStartChar),e.string(t.optionalSegmentEndChar),n.wildcard))),n.token=e.lazy(function(){return e.firstChoice(n.wildcard,n.optional,n.named,n.static)}),n.pattern=e.many1(e.lazy(function(){return n.token})),n},l={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},o=function(e,t){if(Array.isArray(e))return d(e,function(e){return o(e,t)});switch(e.tag){case"wildcard":return"(.*?)";case"named":return"(["+t+"]+)";case"static":return s(e.value);case"optional":return"(?:"+o(e.value,t)+")?"}},a=function(e,t){return null==t&&(t=l.segmentValueCharset),"^"+o(e,t)+"$"},r=function(e){if(Array.isArray(e))return u(e,r);switch(e.tag){case"wildcard":return["_"];case"named":return[e.value];case"static":return[];case"optional":return r(e.value)}},c=function(e,t,n,r){var a,o,i,u;if(null==r&&(r=!1),null!=(u=e[t])){if(a=n[t]||0,o=Array.isArray(u)?u.length-1:0,!(a>o))return i=Array.isArray(u)?u[a]:u,r&&(n[t]=a+1),i;if(r)throw new Error("too few values provided for key `"+t+"`")}else if(r)throw new Error("no values provided for key `"+t+"`")},n=function(e,t,r){var a,o;if(Array.isArray(e)){for(a=-1,o=e.length;++a<o;)if(n(e[a],t,r))return!0;return!1}switch(e.tag){case"wildcard":return null!=c(t,"_",r,!1);case"named":return null!=c(t,e.value,r,!1);case"static":return!1;case"optional":return n(e.value,t,r)}},p=function(e,t,r){if(Array.isArray(e))return d(e,function(e){return p(e,t,r)});switch(e.tag){case"wildcard":return c(t,"_",r,!0);case"named":return c(t,e.value,r,!0);case"static":return e.value;case"optional":return n(e.value,t,r)?p(e.value,t,r):""}},t=function(e,n){var o,i,u,s;if(e instanceof t)return this.isRegex=e.isRegex,this.regex=e.regex,this.ast=e.ast,void(this.names=e.names);if(this.isRegex=e instanceof RegExp,"string"!=typeof e&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=e,null!=n){if(!Array.isArray(n))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(o=h(this.regex),n.length!==o)throw new Error("regex contains "+o+" groups but array of group names contains "+n.length);this.names=n}}else{if(""===e)throw new Error("argument must not be the empty string");if(e.replace(/\s+/g,"")!==e)throw new Error("argument must not contain whitespace");if(i={escapeChar:(null!=n?n.escapeChar:void 0)||l.escapeChar,segmentNameStartChar:(null!=n?n.segmentNameStartChar:void 0)||l.segmentNameStartChar,segmentNameCharset:(null!=n?n.segmentNameCharset:void 0)||l.segmentNameCharset,segmentValueCharset:(null!=n?n.segmentValueCharset:void 0)||l.segmentValueCharset,optionalSegmentStartChar:(null!=n?n.optionalSegmentStartChar:void 0)||l.optionalSegmentStartChar,optionalSegmentEndChar:(null!=n?n.optionalSegmentEndChar:void 0)||l.optionalSegmentEndChar,wildcardChar:(null!=n?n.wildcardChar:void 0)||l.wildcardChar},s=g(i),null==(u=s.pattern(e)))throw new Error("couldn't parse pattern");if(""!==u.rest)throw new Error("could only partially parse pattern");this.ast=u.value,this.regex=new RegExp(a(this.ast,i.segmentValueCharset)),this.names=r(this.ast)}},t.prototype.match=function(e){var t,n;return null==(n=this.regex.exec(e))?null:(t=n.slice(1),this.names?f(this.names,t):t)},t.prototype.stringify=function(e){if(null==e&&(e={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(e!==Object(e))throw new Error("argument must be an object or undefined");return p(this.ast,e,{})},t.escapeForRegex=s,t.concatMap=u,t.stringConcatMap=d,t.regexGroupCount=h,t.keysAndValuesToObject=f,t.P=e,t.newParser=g,t.defaultOptions=l,t.astNodeToRegexString=a,t.astNodeToNames=r,t.getParam=c,t.astNodeContainsSegmentsForProvidedParams=n,t.stringify=p,t})},function(e,t){(function(t){e.exports=t}).call(t,{})}])});
//# sourceMappingURL=router.js.map